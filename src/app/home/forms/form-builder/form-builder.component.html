<div class="demo-card-square mdl-card " style="margin-top:-1.3rem">

  <div *ngIf="disableSubmitButton" style="width:100%">
    <div id="p" class="mdl-progress mdl-js-progress mdl-progress__indeterminate" style="width:100%"></div>
  </div>

  <!-- <div   class="mdl-card__title ">
    <h2 class="mdl-card__title-text">{{formDetails.project}}</h2>
  </div> -->


  <div class="mdl-card__supporting-text background-secondary">
    <b>{{formDetails.project}} <br> {{formDetails.name}}</b> &nbsp;  &nbsp;  &nbsp;


    <!-- <span *ngIf='formError' class="mdl-chip" style="float : right; margin-top: -15px" >
        <span class="mdl-chip__text errorMsg"><b> # </b> </span>
    </span>

    <span *ngIf="displayRequired>0" style="float : right; margin-top: -15px"  class="mdl-chip margin-top-prop">
        <span class="mdl-chip__text requiredMsg"> <b>*  <span style="font-size:0.8rem"> Required </span> </b> </span>
    </span> -->

    <span *ngIf='completeArray.Details.draftID' class="mdl-chip" style="float : right; margin-top: -15px" >
      <span class="mdl-chip__text "><b> Draft </b> </span>
    </span>

    <span *ngIf="flags>0" style="float : right; margin-top: -15px"  class="mdl-chip margin-top-prop">
        <span class="mdl-chip__text flagged "><b>  {{flags}}  <i class="material-icons flag-icon">assistant_photo</i></b> </span>
    </span>

    <button id="demo-menu-lower-right" class="mdl-button mdl-js-button mdl-button--icon" style="float : right; margin-top:-1.4rem !important; max-height:2.5rem !important; height:2.5rem !important; min-height:2.5rem !important;">
      <i class="material-icons">more_vert</i>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu "
        for="demo-menu-lower-right">
        <li class="mdl-menu__item" *ngIf='!completeArray.Details.draftID' (click)="saveDraft()">Save Draft <i class="material-icons">file_copy</i> </li>
        <li class="mdl-menu__item" *ngIf='completeArray.Details.draftID' (click)="deleteDraft()">Delete Draft <i class="material-icons">delete</i> </li>        
    </ul>

  </div>

  <div  class="mdl-card__actions mdl-card--border formBoxHeight">

    <div  *ngFor='let json of jsonArray; let i = index'>

      <div *ngIf="json.type == 'text'" >
        <app-input-text [json]=json  id={{i}} (responseData)="responseData($event)"></app-input-text>
      </div>

      <div *ngIf="json.type == 'password'" >
        <app-input-password [json]=json id={{i}} (responseData)="responseData($event)"></app-input-password>
      </div>

      <div *ngIf="json.type == 'email'" >
        <app-input-email [json]=json  id={{i}}  (responseData)="responseData($event)"></app-input-email>
      </div>

      <div *ngIf="json.type == 'number'" >
        <app-input-number [json]=json  id={{i}}  (responseData)="responseData($event)"></app-input-number>
      </div>

      <div *ngIf="json.type == 'phone'" >
        <app-input-phone [json]=json  id={{i}}  (responseData)="responseData($event)"></app-input-phone>
      </div>

      <div *ngIf="json.type == 'textarea'" >
        <app-input-textarea [json]=json  id={{i}}  (responseData)="responseData($event)"></app-input-textarea>
      </div>

      <div *ngIf="json.type == 'date'" >
        <app-input-date [json]=json  id={{i}}  (responseData)="responseData($event)"></app-input-date>
      </div>

      <div *ngIf="json.type == 'time'" >
        <app-input-time [json]=json  id={{i}}  (responseData)="responseData($event)"></app-input-time>
      </div>

      <div *ngIf="json.type == 'radio'" >
        <app-input-radio [json]=json  id={{i}}  (responseData)="responseData($event)"></app-input-radio>
      </div>

      <div *ngIf="json.type == 'checkbox'" >
        <app-input-checkbox [json]=json  id={{i}}  (responseData)="responseData($event)"></app-input-checkbox>
      </div>

      <div *ngIf="json.type == 'dropdown'" >
        <app-input-dropdown [json]=json  id={{i}}  (responseData)="responseData($event)"></app-input-dropdown>
      </div>

      <div *ngIf="json.type == 'slider'" >
        <app-input-slider [json]=json  id={{i}}  (responseData)="responseData($event)"></app-input-slider>
      </div>

      <div *ngIf="json.type == 'file'" >
        <app-input-file [json]=json  id={{i}}  (responseData)="responseData($event)"></app-input-file>
      </div>

      <div *ngIf="json.type == 'camera'" >
        <app-input-camera [json]=json  id={{i}}  (responseData)="responseData($event)"></app-input-camera>
      </div>

      <div *ngIf="json.type == 'video'" >
        <app-input-video [json]=json  id={{i}}  (responseData)="responseData($event)"></app-input-video>
      </div>

      <div *ngIf="json.type == 'location'" >
        <!-- &nbsp; &nbsp; {{(i+1)}}. Location :: {{getCurrentLocation()}} <br><br> -->
        <app-input-location [json]=json  id={{i}}  (responseData)="responseData($event)"></app-input-location>
      </div>

      <div *ngIf="json.type == 'break'">
        <br>
        <div class="mdl-cell mdl-cell--11-col sectionBreak "> <b class="backgroundColorClass"> {{json.name}} </b></div>
        <br>
      </div>

    </div>

    <div *ngIf='jsonArray.length > 0' class="mdl-grid">
      <div class="mdl-cell mdl-cell--12-col mdl-cell--12-col-phone" style="margin: auto;">

        <button *ngIf="button1" class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent" (click)='proceedForSumbit()' >
         <b>{{submitButton}}  <i class="material-icons">send</i></b>
        </button>

        <button *ngIf="button2" class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent" (click)='saveFormReaponce()' >
         <b>{{submitButton2}}  <i class="material-icons">send</i></b>
        </button>

      </div>


      <div class="mdl-cell mdl-cell--12-col " style="margin: auto;">
        <br>
        <div *ngIf="showErrorMsgOnSubmit.length" >
          <span *ngFor="let error of showErrorMsgOnSubmit" class="mdl-chip  margin-top-prop">
            <span class="mdl-chip__text errorMsg"><b># {{error.ques}}, {{error.msg}} </b> </span>
          </span>
        </div>

      </div>

      <div class="mdl-cell mdl-cell--12-col mdl-cell--12-col-phone" >
        <h5 class="blueCloud"> {{totalSynced(syncedArray,syncCount)}} of {{unSyncCount}} Synced </h5>
      </div>

    </div>

    <div *ngIf="!formResponse" >
      <!-- <div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"></div> -->
      <div class="load-bar">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
      </div>

      <h4>  Just a moment ... </h4>

    </div>

    <div *ngIf='jsonArray.length == 0' class="mdl-grid">

      <div class="mdl-cell mdl-cell--12-col finishMsg" >

        <span *ngIf="send">
          <h3>Thanks! Form submitted... <b> <i class="material-icons">done_all</i> </b> </h3>
          <br>
          <br>
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" (click)="backToDashboard()">
            <b><i class="material-icons">arrow_back</i> dashboard</b>
          </button>
        </span>

        <span *ngIf="responseError">
          <h3> Opps! something went wrong. Please try again </h3>
          <br>
          <br>
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" (click)="backToDashboard()">
            <b><i class="material-icons">arrow_back</i> dashboard</b>
          </button>
        </span>

      </div>
    </div>

  </div>

</div>
